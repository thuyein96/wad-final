(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{9261:function(e,t,r){Promise.resolve().then(r.bind(r,5737))},7783:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(7949),s=r(6265),l=r(3089),a=r(8108),i=r(2861),o=r(3994),c=r(2521),d=r(9348),u=r(9606),m=r(1580),x=r(4969),h=r(1492),p=r(3700),f=r(3904),b=r(5502),j=r(6126);let v=["Profile","Account","Dashboard","Logout"];function g(){let e=(0,j.useRouter)(),[t,r]=s.useState(null),[g,y]=s.useState(null),N=()=>{y(null)};return(0,n.jsx)(l.Z,{position:"static",children:(0,n.jsx)(m.Z,{maxWidth:"xl",children:(0,n.jsxs)(i.Z,{disableGutters:!0,children:[(0,n.jsx)(b.Z,{sx:{display:{xs:"none",md:"flex"},mr:1}}),(0,n.jsx)(c.Z,{variant:"h6",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"VMS"}),(0,n.jsxs)(a.default,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,n.jsx)(o.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{r(e.currentTarget)},color:"inherit",children:(0,n.jsx)(u.Z,{})}),(0,n.jsxs)(d.Z,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!t,onClose:()=>{r(null)},sx:{display:{xs:"block",md:"none"}},children:[(0,n.jsx)(f.Z,{onClick:()=>e.push("/v2/product"),children:(0,n.jsx)(c.Z,{sx:{textAlign:"center"},children:"Products"})},1),(0,n.jsx)(f.Z,{onClick:()=>e.push("/v2/category"),children:(0,n.jsx)(c.Z,{sx:{textAlign:"center"},children:"Categories"})},2)]})]}),(0,n.jsx)(b.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}}),(0,n.jsx)(c.Z,{variant:"h5",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"LOGO"}),(0,n.jsxs)(a.default,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:[(0,n.jsx)(h.default,{onClick:()=>e.push("/v2/product"),sx:{my:2,color:"white",display:"block"},children:"Products"},1),(0,n.jsx)(h.default,{onClick:()=>e.push("/v2/category"),sx:{my:2,color:"white",display:"block"},children:"Categories"},2),(0,n.jsx)(h.default,{onClick:()=>e.push("/v2/customer"),sx:{my:2,color:"white",display:"block"},children:"Customers"},2)]}),(0,n.jsxs)(a.default,{sx:{flexGrow:0},children:[(0,n.jsx)(p.Z,{title:"Open settings",children:(0,n.jsx)(o.Z,{onClick:e=>{y(e.currentTarget)},sx:{p:0},children:(0,n.jsx)(x.Z,{alt:"Remy Sharp",src:"/static/images/avatar/2.jpg"})})}),(0,n.jsx)(d.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:g,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!g,onClose:N,children:v.map(e=>(0,n.jsx)(f.Z,{onClick:N,children:(0,n.jsx)(c.Z,{sx:{textAlign:"center"},children:e})},e))})]})]})})})}},9130:function(e,t,r){"use strict";r.d(t,{default:function(){return a}});var n=r(7949),s=r(6265),l=r(6126);function a(e){var t,r;let{customer:a,onSave:i,onCancel:o}=e,[c,d]=(0,s.useState)({name:(null==a?void 0:a.name)||"",dateOfBirth:(null==a?void 0:null===(t=a.dateOfBirth)||void 0===t?void 0:t.split("T")[0])||"",memberNumber:(null==a?void 0:a.memberNumber)||"",interests:(null==a?void 0:null===(r=a.interests)||void 0===r?void 0:r.join(", "))||""}),[u,m]=(0,s.useState)(""),x=(0,l.useRouter)(),h=e=>{d({...c,[e.target.name]:e.target.value})},p=async e=>{e.preventDefault(),m("");try{let e={...c};if(e.interests&&(e.interests=e.interests.split(",").map(e=>e.trim())),!(await fetch(a?"/api/customer/".concat(a._id):"/api/customer",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save");i?i():x.push("/customer")}catch(e){m(e.message)}};return(0,n.jsxs)("form",{onSubmit:p,className:"space-y-4 max-w-md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,n.jsx)("input",{name:"name",value:c.name,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date of Birth"}),(0,n.jsx)("input",{name:"dateOfBirth",type:"date",value:c.dateOfBirth,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Member Number"}),(0,n.jsx)("input",{name:"memberNumber",type:"number",value:c.memberNumber,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Interests"}),(0,n.jsx)("input",{name:"interests",type:"text",placeholder:"e.g. movies, football, gym, gaming",value:c.interests,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full"})]}),u&&(0,n.jsx)("div",{className:"text-red-500 text-sm",children:u}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:[a?"Update":"Create"," Customer"]}),a&&o&&(0,n.jsx)("button",{type:"button",onClick:o,className:"bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded",children:"Cancel"})]})]})}},5737:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(7949),s=r(4571),l=r(6265),a=r(7783),i=r(9130);function o(){let e="/fin-customer/api",[t,r]=(0,l.useState)([]),[o,c]=(0,l.useState)(null);async function d(){let t=await fetch("".concat(e,"/customer"));r(await t.json())}let u=e=>{c(e)},m=t=>async()=>{confirm("Are you sure?")&&(await fetch("".concat(e,"/customer/").concat(t),{method:"DELETE"}),d())};return(0,l.useEffect)(()=>{d()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,n.jsxs)("div",{className:"flex-1 w-64 ",children:[(0,n.jsx)("h2",{className:"text-xl font-bold m-4",children:o?"Edit Customer":"Add New Customer"}),(0,n.jsx)("div",{className:"m-4",children:(0,n.jsx)(i.default,{customer:o,onSave:()=>{d(),c(null)},onCancel:()=>{c(null)}})})]}),(0,n.jsxs)("div",{className:"border m-4 bg-slate-300 flex-1 w-64",children:[(0,n.jsxs)("h1",{className:"text-2xl",children:["Customers (",t.length,")"]}),(0,n.jsx)("ul",{className:"list-disc ml-8",children:t.map(e=>{var t;return(0,n.jsxs)("li",{className:(null==o?void 0:o._id)===e._id?"bg-yellow-100 p-2 rounded":"",children:[(0,n.jsx)("button",{className:"border border-black p-1/2 mr-1",onClick:()=>u(e),children:"\uD83D\uDCDD"}),(0,n.jsx)("button",{className:"border border-black p-1/2 mr-2",onClick:m(e._id),children:"‚ùå"}),(0,n.jsx)(s.default,{href:"/v2/customer/".concat(e._id),className:"font-bold",children:e.name})," ","- Member #",e.memberNumber," - ",null===(t=e.interests)||void 0===t?void 0:t.join(", ")]},e._id)})})]})]})]})}}},function(e){e.O(0,[84,571,548,961,47,623,744],function(){return e(e.s=9261)}),_N_E=e.O()}]);