(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[197],{9879:function(e,r,t){Promise.resolve().then(t.bind(t,2595))},7783:function(e,r,t){"use strict";t.d(r,{Z:function(){return y}});var n=t(7949),s=t(6265),l=t(3089),a=t(8108),o=t(2861),i=t(3994),c=t(2521),d=t(9348),u=t(9606),x=t(1580),m=t(4969),p=t(1492),h=t(3700),f=t(3904),b=t(5502),j=t(6126);let g=["Profile","Account","Dashboard","Logout"];function y(){let e=(0,j.useRouter)(),[r,t]=s.useState(null),[y,v]=s.useState(null),w=()=>{v(null)};return(0,n.jsx)(l.Z,{position:"static",children:(0,n.jsx)(x.Z,{maxWidth:"xl",children:(0,n.jsxs)(o.Z,{disableGutters:!0,children:[(0,n.jsx)(b.Z,{sx:{display:{xs:"none",md:"flex"},mr:1}}),(0,n.jsx)(c.Z,{variant:"h6",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"VMS"}),(0,n.jsxs)(a.default,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,n.jsx)(i.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{t(e.currentTarget)},color:"inherit",children:(0,n.jsx)(u.Z,{})}),(0,n.jsxs)(d.Z,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!r,onClose:()=>{t(null)},sx:{display:{xs:"block",md:"none"}},children:[(0,n.jsx)(f.Z,{onClick:()=>e.push("/v2/product"),children:(0,n.jsx)(c.Z,{sx:{textAlign:"center"},children:"Products"})},1),(0,n.jsx)(f.Z,{onClick:()=>e.push("/v2/category"),children:(0,n.jsx)(c.Z,{sx:{textAlign:"center"},children:"Categories"})},2)]})]}),(0,n.jsx)(b.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}}),(0,n.jsx)(c.Z,{variant:"h5",noWrap:!0,component:"a",href:"#app-bar-with-responsive-menu",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"LOGO"}),(0,n.jsxs)(a.default,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:[(0,n.jsx)(p.default,{onClick:()=>e.push("/v2/product"),sx:{my:2,color:"white",display:"block"},children:"Products"},1),(0,n.jsx)(p.default,{onClick:()=>e.push("/v2/category"),sx:{my:2,color:"white",display:"block"},children:"Categories"},2),(0,n.jsx)(p.default,{onClick:()=>e.push("/v2/customer"),sx:{my:2,color:"white",display:"block"},children:"Customers"},2)]}),(0,n.jsxs)(a.default,{sx:{flexGrow:0},children:[(0,n.jsx)(h.Z,{title:"Open settings",children:(0,n.jsx)(i.Z,{onClick:e=>{v(e.currentTarget)},sx:{p:0},children:(0,n.jsx)(m.Z,{alt:"Remy Sharp",src:"/static/images/avatar/2.jpg"})})}),(0,n.jsx)(d.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:y,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!y,onClose:w,children:g.map(e=>(0,n.jsx)(f.Z,{onClick:w,children:(0,n.jsx)(c.Z,{sx:{textAlign:"center"},children:e})},e))})]})]})})})}},2595:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var n=t(7949),s=t(4571),l=t(6265),a=t(7783),o=t(6126);function i(e){let{product:r,onSave:t,onCancel:s}=e,[a,i]=(0,l.useState)({code:(null==r?void 0:r.code)||"",name:(null==r?void 0:r.name)||"",description:(null==r?void 0:r.description)||"",price:(null==r?void 0:r.price)||"",category:(null==r?void 0:r.category)||""}),[c,d]=(0,l.useState)([]),[u,x]=(0,l.useState)(""),m=(0,o.useRouter)();(0,l.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await fetch("".concat("/fin-customer/api","/category")),r=await e.json();d(r)}catch(e){console.error("Failed to fetch categories:",e)}},h=e=>{i({...a,[e.target.name]:e.target.value})},f=async e=>{e.preventDefault(),x("");try{let e="/fin-customer/api";if(!(await fetch(r?"".concat(e,"/product/").concat(r._id):"".concat(e,"/product"),{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to save");t?t():m.push("/product")}catch(e){x(e.message)}};return(0,n.jsxs)("form",{onSubmit:f,className:"space-y-4 max-w-md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Code"}),(0,n.jsx)("input",{name:"code",value:a.code,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,n.jsx)("input",{name:"name",value:a.name,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,n.jsx)("textarea",{name:"description",value:a.description,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",rows:3,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Price"}),(0,n.jsx)("input",{name:"price",type:"number",step:"0.01",value:a.price,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category"}),(0,n.jsxs)("select",{name:"category",value:a.category,onChange:h,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select a category"}),c.map(e=>(0,n.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),u&&(0,n.jsx)("div",{className:"text-red-500 text-sm",children:u}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:[r?"Update":"Create"," Product"]}),r&&s&&(0,n.jsx)("button",{type:"button",onClick:s,className:"bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded",children:"Cancel"})]})]})}function c(){let e="/fin-customer/api",[r,t]=(0,l.useState)([]),[o,c]=(0,l.useState)(null);async function d(){let r=await fetch("".concat(e,"/product"));t(await r.json())}let u=e=>{c(e)},x=r=>async()=>{confirm("Are you sure?")&&(await fetch("".concat(e,"/product/").concat(r),{method:"DELETE"}),d())};return(0,l.useEffect)(()=>{d()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{}),(0,n.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,n.jsxs)("div",{className:"flex-1 w-64 ",children:[(0,n.jsx)("h2",{className:"text-xl font-bold m-4",children:o?"Edit Product":"Add New Product"}),(0,n.jsx)("div",{className:"m-4",children:(0,n.jsx)(i,{product:o,onSave:()=>{d(),c(null)},onCancel:()=>{c(null)}})})]}),(0,n.jsxs)("div",{className:"border m-4 bg-slate-300 flex-1 w-64",children:[(0,n.jsxs)("h1",{className:"text-2xl",children:["Products (",r.length,")"]}),(0,n.jsx)("ul",{className:"list-disc ml-8",children:r.map(e=>(0,n.jsxs)("li",{className:(null==o?void 0:o._id)===e._id?"bg-yellow-100 p-2 rounded":"",children:[(0,n.jsx)("button",{className:"border border-black p-1/2 mr-1",onClick:()=>u(e),children:"\uD83D\uDCDD"}),(0,n.jsx)("button",{className:"border border-black p-1/2 mr-2",onClick:x(e._id),children:"‚ùå"}),(0,n.jsx)(s.default,{href:"/v2/product/".concat(e._id),className:"font-bold",children:e.name})," ","- ",e.description," - $",e.price]},e._id))})]})]})]})}}},function(e){e.O(0,[84,571,548,961,47,623,744],function(){return e(e.s=9879)}),_N_E=e.O()}]);