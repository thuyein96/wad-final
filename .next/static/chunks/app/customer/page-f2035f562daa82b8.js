(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[196],{1411:function(e,t,r){Promise.resolve().then(r.bind(r,5826))},5826:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var s=r(7949),l=r(4571),n=r(5938),i=r(6265);function a(){let e="/fin-customer/api";console.debug("API_BASE",e);let{register:t,handleSubmit:r,reset:a,setValue:d}=(0,n.cI)(),[c,o]=(0,i.useState)([]),[m,u]=(0,i.useState)(null);async function b(){let t=await fetch("".concat(e,"/customer"));o(await t.json())}let h=e=>{var t,r;u(e),d("name",e.name),d("dateOfBirth",null===(t=e.dateOfBirth)||void 0===t?void 0:t.split("T")[0]),d("memberNumber",e.memberNumber),d("interests",(null===(r=e.interests)||void 0===r?void 0:r.join(", "))||"")},f=t=>async()=>{confirm("Are you sure?")&&(await fetch("".concat(e,"/customer/").concat(t),{method:"DELETE"}),b())};return(0,i.useEffect)(()=>{b()},[]),(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 w-64 ",children:[(0,s.jsx)("h2",{className:"text-xl font-bold m-4",children:m?"Edit Customer":"Add New Customer"}),(0,s.jsx)("form",{onSubmit:r(t=>{t.interests&&(t.interests=t.interests.split(",").map(e=>e.trim())),fetch(m?"".concat(e,"/customer/").concat(m._id):"".concat(e,"/customer"),{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(()=>{b(),u(null),a()})}),children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 m-4 w-1/2",children:[(0,s.jsx)("div",{children:"Name:"}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{name:"name",type:"text",...t("name",{required:!0}),className:"border border-black w-full"})}),(0,s.jsx)("div",{children:"Date of Birth:"}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{name:"dateOfBirth",type:"date",...t("dateOfBirth",{required:!0}),className:"border border-black w-full"})}),(0,s.jsx)("div",{children:"Member Number:"}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{name:"memberNumber",type:"number",...t("memberNumber",{required:!0}),className:"border border-black w-full"})}),(0,s.jsx)("div",{children:"Interests:"}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{name:"interests",type:"text",placeholder:"e.g. movies, football, gym, gaming",...t("interests"),className:"border border-black w-full"})}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("input",{type:"submit",value:m?"Update":"Add",className:"bg-blue-800 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mr-2"}),m&&(0,s.jsx)("button",{type:"button",onClick:()=>{u(null),a()},className:"bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded-full",children:"Cancel"})]})]})})]}),(0,s.jsxs)("div",{className:"border m-4 bg-slate-300 flex-1 w-64",children:[(0,s.jsxs)("h1",{className:"text-2xl",children:["Customers (",c.length,")"]}),(0,s.jsx)("ul",{className:"list-disc ml-8",children:c.map(e=>{var t;return(0,s.jsxs)("li",{className:(null==m?void 0:m._id)===e._id?"bg-yellow-100 p-2 rounded":"",children:[(0,s.jsx)("button",{className:"border border-black p-1/2 mr-1",onClick:f(e._id),children:"❌"}),(0,s.jsx)("button",{className:"border border-black p-1/2 mr-2",onClick:()=>h(e),children:"✏️"}),(0,s.jsx)(l.default,{href:"/customer/".concat(e._id),className:"font-bold",children:e.name})," ","- Member #",e.memberNumber," - ",null===(t=e.interests)||void 0===t?void 0:t.join(", ")]},e._id)})})]})]})}}},function(e){e.O(0,[571,938,47,623,744],function(){return e(e.s=1411)}),_N_E=e.O()}]);