(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890,691],{7408:function(e,t,r){Promise.resolve().then(r.bind(r,9130))},9130:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var s=r(7949),n=r(6265),a=r(6126);function l(e){var t,r;let{customer:l,onSave:i,onCancel:o}=e,[u,d]=(0,n.useState)({name:(null==l?void 0:l.name)||"",dateOfBirth:(null==l?void 0:null===(t=l.dateOfBirth)||void 0===t?void 0:t.split("T")[0])||"",memberNumber:(null==l?void 0:l.memberNumber)||"",interests:(null==l?void 0:null===(r=l.interests)||void 0===r?void 0:r.join(", "))||""}),[m,c]=(0,n.useState)(""),b=(0,a.useRouter)(),p=e=>{d({...u,[e.target.name]:e.target.value})},h=async e=>{e.preventDefault(),c("");try{let e={...u};if(e.interests&&(e.interests=e.interests.split(",").map(e=>e.trim())),!(await fetch(l?"/api/customer/".concat(l._id):"/api/customer",{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save");i?i():b.push("/customer")}catch(e){c(e.message)}};return(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4 max-w-md",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,s.jsx)("input",{name:"name",value:u.name,onChange:p,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date of Birth"}),(0,s.jsx)("input",{name:"dateOfBirth",type:"date",value:u.dateOfBirth,onChange:p,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Member Number"}),(0,s.jsx)("input",{name:"memberNumber",type:"number",value:u.memberNumber,onChange:p,className:"border border-gray-300 rounded px-3 py-2 w-full",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Interests"}),(0,s.jsx)("input",{name:"interests",type:"text",placeholder:"e.g. movies, football, gym, gaming",value:u.interests,onChange:p,className:"border border-gray-300 rounded px-3 py-2 w-full"})]}),m&&(0,s.jsx)("div",{className:"text-red-500 text-sm",children:m}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:[l?"Update":"Create"," Customer"]}),l&&o&&(0,s.jsx)("button",{type:"button",onClick:o,className:"bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-4 rounded",children:"Cancel"})]})]})}},6126:function(e,t,r){"use strict";var s=r(1742);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[47,623,744],function(){return e(e.s=7408)}),_N_E=e.O()}]);